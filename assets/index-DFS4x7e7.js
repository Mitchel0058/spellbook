var uo=Object.defineProperty;var _o=(t,e,n)=>e in t?uo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>_o(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Le,b,un,ue,Pt,_n,fn,dn,lt,Qe,et,pn,Oe={},hn=[],fo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ce=Array.isArray;function ne(t,e){for(var n in e)t[n]=e[n];return t}function ut(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function V(t,e,n){var o,r,s,i={};for(s in e)s=="key"?o=e[s]:s=="ref"?r=e[s]:i[s]=e[s];if(arguments.length>2&&(i.children=arguments.length>3?Le.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)i[s]===void 0&&(i[s]=t.defaultProps[s]);return Ne(t,i,o,r,null)}function Ne(t,e,n,o,r){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++un,__i:-1,__u:0};return r==null&&b.vnode!=null&&b.vnode(s),s}function mn(){return{current:null}}function x(t){return t.children}function Q(t,e){this.props=t,this.context=e}function me(t,e){if(e==null)return t.__?me(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?me(t):null}function gn(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return gn(t)}}function tt(t){(!t.__d&&(t.__d=!0)&&ue.push(t)&&!Ue.__r++||Pt!=b.debounceRendering)&&((Pt=b.debounceRendering)||_n)(Ue)}function Ue(){for(var t,e,n,o,r,s,i,u=1;ue.length;)ue.length>u&&ue.sort(fn),t=ue.shift(),u=ue.length,t.__d&&(n=void 0,o=void 0,r=(o=(e=t).__v).__e,s=[],i=[],e.__P&&((n=ne({},o)).__v=o.__v+1,b.vnode&&b.vnode(n),_t(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[r]:null,s,r??me(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,vn(s,n,i),o.__e=o.__=null,n.__e!=r&&gn(n)));Ue.__r=0}function yn(t,e,n,o,r,s,i,u,_,l,p){var c,h,m,L,T,S,C,I=o&&o.__k||hn,$=e.length;for(_=po(n,e,I,_,$),c=0;c<$;c++)(m=n.__k[c])!=null&&(h=m.__i==-1?Oe:I[m.__i]||Oe,m.__i=c,S=_t(t,m,h,r,s,i,u,_,l,p),L=m.__e,m.ref&&h.ref!=m.ref&&(h.ref&&ft(h.ref,null,m),p.push(m.ref,m.__c||L,m)),T==null&&L!=null&&(T=L),(C=!!(4&m.__u))||h.__k===m.__k?_=En(m,_,t,C):typeof m.type=="function"&&S!==void 0?_=S:L&&(_=L.nextSibling),m.__u&=-7);return n.__e=T,_}function po(t,e,n,o,r){var s,i,u,_,l,p=n.length,c=p,h=0;for(t.__k=new Array(r),s=0;s<r;s++)(i=e[s])!=null&&typeof i!="boolean"&&typeof i!="function"?(_=s+h,(i=t.__k[s]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Ne(null,i,null,null,null):Ce(i)?Ne(x,{children:i},null,null,null):i.constructor==null&&i.__b>0?Ne(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,u=null,(l=i.__i=ho(i,n,_,c))!=-1&&(c--,(u=n[l])&&(u.__u|=2)),u==null||u.__v==null?(l==-1&&(r>p?h--:r<p&&h++),typeof i.type!="function"&&(i.__u|=4)):l!=_&&(l==_-1?h--:l==_+1?h++:(l>_?h--:h++,i.__u|=4))):t.__k[s]=null;if(c)for(s=0;s<p;s++)(u=n[s])!=null&&(2&u.__u)==0&&(u.__e==o&&(o=me(u)),Sn(u,u));return o}function En(t,e,n,o){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=En(r[s],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=me(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function oe(t,e){return e=e||[],t==null||typeof t=="boolean"||(Ce(t)?t.some(function(n){oe(n,e)}):e.push(t)),e}function ho(t,e,n,o){var r,s,i,u=t.key,_=t.type,l=e[n],p=l!=null&&(2&l.__u)==0;if(l===null&&t.key==null||p&&u==l.key&&_==l.type)return n;if(o>(p?1:0)){for(r=n-1,s=n+1;r>=0||s<e.length;)if((l=e[i=r>=0?r--:s++])!=null&&(2&l.__u)==0&&u==l.key&&_==l.type)return i}return-1}function Rt(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||fo.test(e)?n:n+"px"}function Re(t,e,n,o,r){var s,i;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Rt(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Rt(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(dn,"$1")),i=e.toLowerCase(),e=i in t||e=="onFocusOut"||e=="onFocusIn"?i.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?o?n.u=o.u:(n.u=lt,t.addEventListener(e,s?et:Qe,s)):t.removeEventListener(e,s?et:Qe,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Dt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=lt++;else if(e.t<n.u)return;return n(b.event?b.event(e):e)}}}function _t(t,e,n,o,r,s,i,u,_,l){var p,c,h,m,L,T,S,C,I,$,j,ee,ie,ke,H,M,q,B=e.type;if(e.constructor!=null)return null;128&n.__u&&(_=!!(32&n.__u),s=[u=e.__e=n.__e]),(p=b.__b)&&p(e);e:if(typeof B=="function")try{if(C=e.props,I="prototype"in B&&B.prototype.render,$=(p=B.contextType)&&o[p.__c],j=p?$?$.props.value:p.__:o,n.__c?S=(c=e.__c=n.__c).__=c.__E:(I?e.__c=c=new B(C,j):(e.__c=c=new Q(C,j),c.constructor=B,c.render=go),$&&$.sub(c),c.props=C,c.state||(c.state={}),c.context=j,c.__n=o,h=c.__d=!0,c.__h=[],c._sb=[]),I&&c.__s==null&&(c.__s=c.state),I&&B.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ne({},c.__s)),ne(c.__s,B.getDerivedStateFromProps(C,c.__s))),m=c.props,L=c.state,c.__v=e,h)I&&B.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),I&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(I&&B.getDerivedStateFromProps==null&&C!==m&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(C,j),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(C,c.__s,j)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(c.props=C,c.state=c.__s,c.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(z){z&&(z.__=e)}),ee=0;ee<c._sb.length;ee++)c.__h.push(c._sb[ee]);c._sb=[],c.__h.length&&i.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(C,c.__s,j),I&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(m,L,T)})}if(c.context=j,c.props=C,c.__P=t,c.__e=!1,ie=b.__r,ke=0,I){for(c.state=c.__s,c.__d=!1,ie&&ie(e),p=c.render(c.props,c.state,c.context),H=0;H<c._sb.length;H++)c.__h.push(c._sb[H]);c._sb=[]}else do c.__d=!1,ie&&ie(e),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++ke<25);c.state=c.__s,c.getChildContext!=null&&(o=ne(ne({},o),c.getChildContext())),I&&!h&&c.getSnapshotBeforeUpdate!=null&&(T=c.getSnapshotBeforeUpdate(m,L)),M=p,p!=null&&p.type===x&&p.key==null&&(M=bn(p.props.children)),u=yn(t,Ce(M)?M:[M],e,n,o,r,s,i,u,_,l),c.base=e.__e,e.__u&=-161,c.__h.length&&i.push(c),S&&(c.__E=c.__=null)}catch(z){if(e.__v=null,_||s!=null)if(z.then){for(e.__u|=_?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;s[s.indexOf(u)]=null,e.__e=u}else{for(q=s.length;q--;)ut(s[q]);nt(e)}else e.__e=n.__e,e.__k=n.__k,z.then||nt(e);b.__e(z,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=mo(n.__e,e,n,o,r,s,i,_,l);return(p=b.diffed)&&p(e),128&e.__u?void 0:u}function nt(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(nt)}function vn(t,e,n){for(var o=0;o<n.length;o++)ft(n[o],n[++o],n[++o]);b.__c&&b.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){b.__e(s,r.__v)}})}function bn(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ce(t)?t.map(bn):ne({},t)}function mo(t,e,n,o,r,s,i,u,_){var l,p,c,h,m,L,T,S=n.props,C=e.props,I=e.type;if(I=="svg"?r="http://www.w3.org/2000/svg":I=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((m=s[l])&&"setAttribute"in m==!!I&&(I?m.localName==I:m.nodeType==3)){t=m,s[l]=null;break}}if(t==null){if(I==null)return document.createTextNode(C);t=document.createElementNS(r,I,C.is&&C),u&&(b.__m&&b.__m(e,s),u=!1),s=null}if(I==null)S===C||u&&t.data==C||(t.data=C);else{if(s=s&&Le.call(t.childNodes),S=n.props||Oe,!u&&s!=null)for(S={},l=0;l<t.attributes.length;l++)S[(m=t.attributes[l]).name]=m.value;for(l in S)if(m=S[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=m;else if(!(l in C)){if(l=="value"&&"defaultValue"in C||l=="checked"&&"defaultChecked"in C)continue;Re(t,l,null,m,r)}}for(l in C)m=C[l],l=="children"?h=m:l=="dangerouslySetInnerHTML"?p=m:l=="value"?L=m:l=="checked"?T=m:u&&typeof m!="function"||S[l]===m||Re(t,l,m,S[l],r);if(p)u||c&&(p.__html==c.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(c&&(t.innerHTML=""),yn(e.type=="template"?t.content:t,Ce(h)?h:[h],e,n,o,I=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,i,s?s[0]:n.__k&&me(n,0),u,_),s!=null)for(l=s.length;l--;)ut(s[l]);u||(l="value",I=="progress"&&L==null?t.removeAttribute("value"):L!=null&&(L!==t[l]||I=="progress"&&!L||I=="option"&&L!=S[l])&&Re(t,l,L,S[l],r),l="checked",T!=null&&T!=t[l]&&Re(t,l,T,S[l],r))}return t}function ft(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){b.__e(r,n)}}function Sn(t,e,n){var o,r;if(b.unmount&&b.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||ft(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){b.__e(s,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Sn(o[r],e,n||typeof t.type!="function");n||ut(t.__e),t.__c=t.__=t.__e=void 0}function go(t,e,n){return this.constructor(t,n)}function ge(t,e,n){var o,r,s,i;e==document&&(e=document.documentElement),b.__&&b.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,s=[],i=[],_t(e,t=(!o&&n||e).__k=V(x,null,[t]),r||Oe,Oe,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?Le.call(e.childNodes):null,s,!o&&n?n:r?r.__e:e.firstChild,o,i),vn(s,t,i)}function Nn(t,e){ge(t,e,Nn)}function yo(t,e,n){var o,r,s,i,u=ne({},t.props);for(s in t.type&&t.type.defaultProps&&(i=t.type.defaultProps),e)s=="key"?o=e[s]:s=="ref"?r=e[s]:u[s]=e[s]===void 0&&i!=null?i[s]:e[s];return arguments.length>2&&(u.children=arguments.length>3?Le.call(arguments,2):n),Ne(t.type,u,o||t.key,r||t.ref,null)}function Te(t){function e(n){var o,r;return this.getChildContext||(o=new Set,(r={})[e.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&o.forEach(function(i){i.__e=!0,tt(i)})},this.sub=function(s){o.add(s);var i=s.componentWillUnmount;s.componentWillUnmount=function(){o&&o.delete(s),i&&i.call(s)}}),n.children}return e.__c="__cC"+pn++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,o){return n.children(o)}).contextType=e,e}Le=hn.slice,b={__e:function(t,e,n,o){for(var r,s,i;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),i=r.__d),i)return r.__E=r}catch(u){t=u}throw t}},un=0,Q.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ne({},this.state),typeof t=="function"&&(t=t(ne({},n),this.props)),t&&ne(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),tt(this))},Q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),tt(this))},Q.prototype.render=x,ue=[],_n=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fn=function(t,e){return t.__v.__b-e.__v.__b},Ue.__r=0,dn=/(PointerCapture)$|Capture$/i,lt=0,Qe=Dt(!1),et=Dt(!0),pn=0;var Eo=0;function f(t,e,n,o,r,s){e||(e={});var i,u,_=e;if("ref"in _)for(u in _={},e)u=="ref"?i=e[u]:_[u]=e[u];var l={type:t,props:_,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Eo,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(i=t.defaultProps))for(u in i)_[u]===void 0&&(_[u]=i[u]);return b.vnode&&b.vnode(l),l}function vo(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,r,s,i=[],u="",_=t.split("/");for(_[0]||_.shift();r=_.shift();)n=r[0],n==="*"?(i.push(n),u+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(o=r.indexOf("?",1),s=r.indexOf(".",1),i.push(r.substring(1,~o?o:~s?s:r.length)),u+=~o&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(u+=(~o?"?":"")+"\\"+r.substring(s))):u+="/"+r;return{keys:i,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var re,P,Ke,Ut,ye=0,wn=[],D=b,Ft=D.__b,Bt=D.__r,xt=D.diffed,jt=D.__c,$t=D.unmount,Mt=D.__;function _e(t,e){D.__h&&D.__h(P,t,ye||e),ye=0;var n=P.__H||(P.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function N(t){return ye=1,Be(On,t)}function Be(t,e,n){var o=_e(re++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):On(void 0,e),function(u){var _=o.__N?o.__N[0]:o.__[0],l=o.t(_,u);_!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=P,!P.__f)){var r=function(u,_,l){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!s||s.call(this,u,_,l);var c=o.__c.props!==u;return p.forEach(function(h){if(h.__N){var m=h.__[0];h.__=h.__N,h.__N=void 0,m!==h.__[0]&&(c=!0)}}),s&&s.call(this,u,_,l)||c};P.__f=!0;var s=P.shouldComponentUpdate,i=P.componentWillUpdate;P.componentWillUpdate=function(u,_,l){if(this.__e){var p=s;s=void 0,r(u,_,l),s=p}i&&i.call(this,u,_,l)},P.shouldComponentUpdate=r}return o.__N||o.__}function U(t,e){var n=_e(re++,3);!D.__s&&mt(n.__H,e)&&(n.__=t,n.u=e,P.__H.__h.push(n))}function fe(t,e){var n=_e(re++,4);!D.__s&&mt(n.__H,e)&&(n.__=t,n.u=e,P.__h.push(n))}function se(t){return ye=5,Ie(function(){return{current:t}},[])}function dt(t,e,n){ye=6,fe(function(){if(typeof t=="function"){var o=t(e());return function(){t(null),o&&typeof o=="function"&&o()}}if(t)return t.current=e(),function(){return t.current=null}},n==null?n:n.concat(t))}function Ie(t,e){var n=_e(re++,7);return mt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function xe(t,e){return ye=8,Ie(function(){return t},e)}function ve(t){var e=P.context[t.__c],n=_e(re++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(P)),e.props.value):t.__}function pt(t,e){D.useDebugValue&&D.useDebugValue(e?e(t):t)}function bo(t){var e=_e(re++,10),n=N();return e.__=t,P.componentDidCatch||(P.componentDidCatch=function(o,r){e.__&&e.__(o,r),n[1](o)}),[n[0],function(){n[1](void 0)}]}function ht(){var t=_e(re++,11);if(!t.__){for(var e=P.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function So(){for(var t;t=wn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(De),t.__H.__h.forEach(ot),t.__H.__h=[]}catch(e){t.__H.__h=[],D.__e(e,t.__v)}}D.__b=function(t){P=null,Ft&&Ft(t)},D.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Mt&&Mt(t,e)},D.__r=function(t){Bt&&Bt(t),re=0;var e=(P=t.__c).__H;e&&(Ke===P?(e.__h=[],P.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(De),e.__h.forEach(ot),e.__h=[],re=0)),Ke=P},D.diffed=function(t){xt&&xt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(wn.push(e)!==1&&Ut===D.requestAnimationFrame||((Ut=D.requestAnimationFrame)||No)(So)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ke=P=null},D.__c=function(t,e){e.some(function(n){try{n.__h.forEach(De),n.__h=n.__h.filter(function(o){return!o.__||ot(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],D.__e(o,n.__v)}}),jt&&jt(t,e)},D.unmount=function(t){$t&&$t(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{De(o)}catch(r){e=r}}),n.__H=void 0,e&&D.__e(e,n.__v))};var Gt=typeof requestAnimationFrame=="function";function No(t){var e,n=function(){clearTimeout(o),Gt&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Gt&&(e=requestAnimationFrame(n))}function De(t){var e=P,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),P=e}function ot(t){var e=P;t.__c=t.__(),P=e}function mt(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function On(t,e){return typeof e=="function"?e(t):e}function Ln(t,e){for(var n in e)t[n]=e[n];return t}function rt(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function gt(t,e){var n=e(),o=N({t:{__:n,u:e}}),r=o[0].t,s=o[1];return fe(function(){r.__=n,r.u=e,We(r)&&s({t:r})},[t,n,e]),U(function(){return We(r)&&s({t:r}),t(function(){We(r)&&s({t:r})})},[t]),n}function We(t){var e,n,o=t.u,r=t.__;try{var s=o();return!((e=r)===(n=s)&&(e!==0||1/e==1/n)||e!=e&&n!=n)}catch{return!0}}function yt(t){t()}function Et(t){return t}function vt(){return[!1,yt]}var bt=fe;function Fe(t,e){this.props=t,this.context=e}function Cn(t,e){function n(r){var s=this.props.ref,i=s==r.ref;return!i&&s&&(s.call?s(null):s.current=null),e?!e(this.props,r)||!i:rt(this.props,r)}function o(r){return this.shouldComponentUpdate=n,V(t,r)}return o.displayName="Memo("+(t.displayName||t.name)+")",o.prototype.isReactComponent=!0,o.__f=!0,o.type=t,o}(Fe.prototype=new Q).isPureReactComponent=!0,Fe.prototype.shouldComponentUpdate=function(t,e){return rt(this.props,t)||rt(this.state,e)};var Vt=b.__b;b.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Vt&&Vt(t)};var wo=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function St(t){function e(n){var o=Ln({},n);return delete o.ref,t(o,n.ref||null)}return e.$$typeof=wo,e.render=t,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var Ht=function(t,e){return t==null?null:oe(oe(t).map(e))},Tn={map:Ht,forEach:Ht,count:function(t){return t?oe(t).length:0},only:function(t){var e=oe(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:oe},Oo=b.__e;b.__e=function(t,e,n,o){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Oo(t,e,n,o)};var Kt=b.unmount;function In(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=Ln({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return In(o,e,n)})),t}function kn(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return kn(o,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function we(){this.__u=0,this.o=null,this.__b=null}function An(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Pn(t){var e,n,o;function r(s){if(e||(e=t()).then(function(i){n=i.default||i},function(i){o=i}),o)throw o;if(!n)throw e;return V(n,s)}return r.displayName="Lazy",r.__f=!0,r}function he(){this.i=null,this.l=null}b.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Kt&&Kt(t)},(we.prototype=new Q).__c=function(t,e){var n=e.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=An(o.__v),s=!1,i=function(){s||(s=!0,n.__R=null,r?r(u):u())};n.__R=i;var u=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=kn(_,_.__c.__P,_.__c.__O)}var l;for(o.setState({__a:o.__b=null});l=o.o.pop();)l.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(i,i)},we.prototype.componentWillUnmount=function(){this.o=[]},we.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=In(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&V(x,null,t.fallback);return r&&(r.__u&=-33),[V(x,null,e.__a?null:t.children),r]};var Wt=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function Lo(t){return this.getChildContext=function(){return t.context},t.children}function Co(t){var e=this,n=t.h;if(e.componentWillUnmount=function(){ge(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var o=e.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(r,s){this.childNodes.push(r),e.h.insertBefore(r,s)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.h.removeChild(r)}}}ge(V(Lo,{context:e.context},t.__v),e.v)}function Rn(t,e){var n=V(Co,{__v:t,h:e});return n.containerInfo=e,n}(he.prototype=new Q).__a=function(t){var e=this,n=An(e.__v),o=e.l.get(t);return o[0]++,function(r){var s=function(){e.props.revealOrder?(o.push(r),Wt(e,t,o)):r()};n?n(s):s()}},he.prototype.render=function(t){this.i=null,this.l=new Map;var e=oe(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},he.prototype.componentDidUpdate=he.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Wt(t,n,e)})};var Dn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,To=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Io=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ko=/[A-Z0-9]/g,Ao=typeof document<"u",Po=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Un(t,e,n){return e.__k==null&&(e.textContent=""),ge(t,e),typeof n=="function"&&n(),t?t.__c:null}function Fn(t,e,n){return Nn(t,e),typeof n=="function"&&n(),t?t.__c:null}Q.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Q.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var zt=b.event;function Ro(){}function Do(){return this.cancelBubble}function Uo(){return this.defaultPrevented}b.event=function(t){return zt&&(t=zt(t)),t.persist=Ro,t.isPropagationStopped=Do,t.isDefaultPrevented=Uo,t.nativeEvent=t};var Nt,Fo={enumerable:!1,configurable:!0,get:function(){return this.class}},Yt=b.vnode;b.vnode=function(t){typeof t.type=="string"&&(function(e){var n=e.props,o=e.type,r={},s=o.indexOf("-")===-1;for(var i in n){var u=n[i];if(!(i==="value"&&"defaultValue"in n&&u==null||Ao&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&u===!0?u="":_==="translate"&&u==="no"?u=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||Po(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":Io.test(i)&&(i=_):_=i="oninput":s&&To.test(i)?i=i.replace(ko,"-$&").toLowerCase():u===null&&(u=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=u}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=oe(n.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=oe(n.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",Fo)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r})(t),t.$$typeof=Dn,Yt&&Yt(t)};var qt=b.__r;b.__r=function(t){qt&&qt(t),Nt=t.__c};var Jt=b.diffed;b.diffed=function(t){Jt&&Jt(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),Nt=null};var Bn={ReactCurrentDispatcher:{current:{readContext:function(t){return Nt.__n[t.__c].props.value},useCallback:xe,useContext:ve,useDebugValue:pt,useDeferredValue:Et,useEffect:U,useId:ht,useImperativeHandle:dt,useInsertionEffect:bt,useLayoutEffect:fe,useMemo:Ie,useReducer:Be,useRef:se,useState:N,useSyncExternalStore:gt,useTransition:vt}}},Bo="18.3.1";function xn(t){return V.bind(null,t)}function de(t){return!!t&&t.$$typeof===Dn}function jn(t){return de(t)&&t.type===x}function $n(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function je(t){return de(t)?yo.apply(null,arguments):t}function Mn(t){return!!t.__k&&(ge(null,t),!0)}function Gn(t){return t&&(t.base||t.nodeType===1&&t)||null}var Vn=function(t,e){return t(e)},Hn=function(t,e){return t(e)},Kn=x,Wn=de,xo={useState:N,useId:ht,useReducer:Be,useEffect:U,useLayoutEffect:fe,useInsertionEffect:bt,useTransition:vt,useDeferredValue:Et,useSyncExternalStore:gt,startTransition:yt,useRef:se,useImperativeHandle:dt,useMemo:Ie,useCallback:xe,useContext:ve,useDebugValue:pt,version:"18.3.1",Children:Tn,render:Un,hydrate:Fn,unmountComponentAtNode:Mn,createPortal:Rn,createElement:V,createContext:Te,createFactory:xn,cloneElement:je,createRef:mn,Fragment:x,isValidElement:de,isElement:Wn,isFragment:jn,isMemo:$n,findDOMNode:Gn,Component:Q,PureComponent:Fe,memo:Cn,forwardRef:St,flushSync:Hn,unstable_batchedUpdates:Vn,StrictMode:Kn,Suspense:we,SuspenseList:he,lazy:Pn,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Bn};const zn=Object.freeze(Object.defineProperty({__proto__:null,Children:Tn,Component:Q,Fragment:x,PureComponent:Fe,StrictMode:Kn,Suspense:we,SuspenseList:he,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Bn,cloneElement:je,createContext:Te,createElement:V,createFactory:xn,createPortal:Rn,createRef:mn,default:xo,findDOMNode:Gn,flushSync:Hn,forwardRef:St,hydrate:Fn,isElement:Wn,isFragment:jn,isMemo:$n,isValidElement:de,lazy:Pn,memo:Cn,render:Un,startTransition:yt,unmountComponentAtNode:Mn,unstable_batchedUpdates:Vn,useCallback:xe,useContext:ve,useDebugValue:pt,useDeferredValue:Et,useEffect:U,useErrorBoundary:bo,useId:ht,useImperativeHandle:dt,useInsertionEffect:bt,useLayoutEffect:fe,useMemo:Ie,useReducer:Be,useRef:se,useState:N,useSyncExternalStore:gt,useTransition:vt,version:Bo},Symbol.toStringTag,{value:"Module"}));function jo(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return t[o]}})}),n}var ze={exports:{}},Ye={};const $o=jo(zn);/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt;function Mo(){if(Xt)return Ye;Xt=1;var t=$o;function e(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var n=typeof Object.is=="function"?Object.is:e,o=t.useState,r=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function u(c,h){var m=h(),L=o({inst:{value:m,getSnapshot:h}}),T=L[0].inst,S=L[1];return s(function(){T.value=m,T.getSnapshot=h,_(T)&&S({inst:T})},[c,m,h]),r(function(){return _(T)&&S({inst:T}),c(function(){_(T)&&S({inst:T})})},[c]),i(m),m}function _(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!n(c,m)}catch{return!0}}function l(c,h){return h()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:u;return Ye.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Ye}var Zt;function Go(){return Zt||(Zt=1,ze.exports=Mo()),ze.exports}var Vo=Go();const Ho=zn.useInsertionEffect,Ko=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wo=Ko?fe:U,zo=Ho||Wo,Yn=t=>{const e=se([t,(...n)=>e[0](...n)]).current;return zo(()=>{e[0]=t}),e[1]},Yo="popstate",wt="pushState",Ot="replaceState",qo="hashchange",Qt=[Yo,wt,Ot,qo],Jo=t=>{for(const e of Qt)addEventListener(e,t);return()=>{for(const e of Qt)removeEventListener(e,t)}},qn=(t,e)=>Vo.useSyncExternalStore(Jo,t,e),Xo=()=>location.search,Zo=({ssrSearch:t=""}={})=>qn(Xo,()=>t),en=()=>location.pathname,Qo=({ssrPath:t}={})=>qn(en,t?()=>t:en),er=(t,{replace:e=!1,state:n=null}={})=>history[e?Ot:wt](n,"",t),tr=(t={})=>[Qo(t),er],tn=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[tn]>"u"){for(const t of[wt,Ot]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),o=new Event(t);return o.arguments=arguments,dispatchEvent(o),n}}Object.defineProperty(window,tn,{value:!0})}const nr=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Jn=(t="")=>t==="/"?"":t,or=(t,e)=>t[0]==="~"?t.slice(1):Jn(e)+t,rr=(t="",e)=>nr(nn(Jn(t)),nn(e)),nn=t=>{try{return decodeURI(t)}catch{return t}},Xn={hook:tr,searchHook:Zo,parser:vo,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Zn=Te(Xn),$e=()=>ve(Zn),Qn={},eo=Te(Qn),sr=()=>ve(eo),Lt=t=>{const[e,n]=t.hook(t);return[rr(t.base,e),Yn((o,r)=>n(or(o,t.base),r))]},to=(t,e,n,o)=>{const{pattern:r,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",o),i=r.exec(n)||[],[u,..._]=i;return u!==void 0?[!0,(()=>{const l=s!==!1?Object.fromEntries(s.map((c,h)=>[c,_[h]])):i.groups;let p={..._};return l&&Object.assign(p,l),p})(),...o?[u]:[]]:[!1,null]},no=({children:t,...e})=>{var p,c;const n=$e(),o=e.hook?Xn:n;let r=o;const[s,i]=((p=e.ssrPath)==null?void 0:p.split("?"))??[];i&&(e.ssrSearch=i,e.ssrPath=s),e.hrefs=e.hrefs??((c=e.hook)==null?void 0:c.hrefs);let u=se({}),_=u.current,l=_;for(let h in o){const m=h==="base"?o[h]+(e[h]||""):e[h]||o[h];_===l&&m!==l[h]&&(u.current=l={...l}),l[h]=m,(m!==o[h]||m!==r[h])&&(r=l)}return V(Zn.Provider,{value:r,children:t})},on=({children:t,component:e},n)=>e?V(e,{params:n}):typeof t=="function"?t(n):t,ir=t=>{let e=se(Qn);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([o,r])=>r!==n[o])?t:n},qe=({path:t,nest:e,match:n,...o})=>{const r=$e(),[s]=Lt(r),[i,u,_]=n??to(r.parser,t,s,e),l=ir({...sr(),...u});if(!i)return null;const p=_?V(no,{base:_},on(o,l)):on(o,l);return V(eo.Provider,{value:l,children:p})},ae=St((t,e)=>{const n=$e(),[o,r]=Lt(n),{to:s="",href:i=s,onClick:u,asChild:_,children:l,className:p,replace:c,state:h,...m}=t,L=Yn(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(u==null||u(S),S.defaultPrevented||(S.preventDefault(),r(i,t)))}),T=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return _&&de(l)?je(l,{onClick:L,href:T}):V("a",{...m,onClick:L,href:T,className:p!=null&&p.call?p(o===i):p,children:l,ref:e})}),oo=t=>Array.isArray(t)?t.flatMap(e=>oo(e&&e.type===x?e.props.children:e)):[t],ar=({children:t,location:e})=>{const n=$e(),[o]=Lt(n);for(const r of oo(t)){let s=0;if(de(r)&&(s=to(n.parser,r.props.path,e||o,r.props.nest))[0])return je(r,{match:s})}return null},Z={COVER:"cover",TITLE:"title",SPELL:"spell",SPELLRIGHT:"spell-right"},rn={[Z.COVER]:"spellbook_cover.svg",[Z.TITLE]:"spellbook_title.svg",[Z.SPELL]:"spellbook_spell.svg",[Z.SPELLRIGHT]:"spellbook_spell_right.svg"};function Ee({pageType:t,children:e}){return f("div",{className:"svg-overlay",children:[f("img",{className:"page-img",src:(o=>`assets/img/${rn[o]||rn[Z.COVER]}`)(t),alt:`${t} page of DnD book`}),e]})}const cr=(t,e)=>e.some(n=>t instanceof n);let sn,an;function lr(){return sn||(sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ur(){return an||(an=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ro=new WeakMap,st=new WeakMap,so=new WeakMap,Je=new WeakMap,Ct=new WeakMap;function _r(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(ce(t.result)),r()},i=()=>{o(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ro.set(n,t)}).catch(()=>{}),Ct.set(e,t),e}function fr(t){if(st.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),r()},i=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});st.set(t,e)}let it={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return st.get(t);if(e==="objectStoreNames")return t.objectStoreNames||so.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dr(t){it=t(it)}function pr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Xe(this),e,...n);return so.set(o,e.sort?e.sort():[e]),ce(o)}:ur().includes(t)?function(...e){return t.apply(Xe(this),e),ce(ro.get(this))}:function(...e){return ce(t.apply(Xe(this),e))}}function hr(t){return typeof t=="function"?pr(t):(t instanceof IDBTransaction&&fr(t),cr(t,lr())?new Proxy(t,it):t)}function ce(t){if(t instanceof IDBRequest)return _r(t);if(Je.has(t))return Je.get(t);const e=hr(t);return e!==t&&(Je.set(t,e),Ct.set(e,t)),e}const Xe=t=>Ct.get(t);function mr(t,e,{blocked:n,upgrade:o,blocking:r,terminated:s}={}){const i=indexedDB.open(t,e),u=ce(i);return o&&i.addEventListener("upgradeneeded",_=>{o(ce(i.result),_.oldVersion,_.newVersion,ce(i.transaction),_)}),n&&i.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),u.then(_=>{s&&_.addEventListener("close",()=>s()),r&&_.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const gr=["get","getKey","getAll","getAllKeys","count"],yr=["put","add","delete","clear"],Ze=new Map;function cn(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ze.get(e))return Ze.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=yr.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||gr.includes(n)))return;const s=async function(i,...u){const _=this.transaction(i,r?"readwrite":"readonly");let l=_.store;return o&&(l=l.index(u.shift())),(await Promise.all([l[n](...u),r&&_.done]))[0]};return Ze.set(e,s),s}dr(t=>({...t,get:(e,n,o)=>cn(e,n)||t.get(e,n,o),has:(e,n)=>!!cn(e,n)||t.has(e,n)}));const O={RECENTPAGE:"recentPage",FONTADDITION:"fontAddition",PAGEFIT:"pageFit",ANIMATION:"animation",CURRENT_SPELLBOOK_DB:"currentSpellbookDb",SPELLBOOK_LIST:"spellbookList",CUSTOM_FONT:"customFont",CUSTOM_FONT_NAME:"customFontName"},Se={[O.RECENTPAGE]:1,[O.FONTADDITION]:0,[O.PAGEFIT]:!1,[O.ANIMATION]:!0,[O.CURRENT_SPELLBOOK_DB]:"Spellbook",[O.SPELLBOOK_LIST]:["Spellbook"],[O.CUSTOM_FONT]:null,[O.CUSTOM_FONT_NAME]:null},a={PAGE:"page",NAME:"name",INCANT:"incant",SPEED:"speed",RANGE:"range",TYPE:"type",DESC:"desc",LVL:"lvl",ICONURL:"iconUrl",ICONOBJECTFIT:"iconObjectFit",ICONOBJECTURL:"iconObjectUrl"},at={[a.PAGE]:0,[a.NAME]:"",[a.INCANT]:"",[a.SPEED]:"",[a.RANGE]:"",[a.TYPE]:"",[a.DESC]:"",[a.LVL]:0,[a.ICONURL]:"",[a.ICONOBJECTFIT]:"contain"},F={PAGE:"page",TITLE:"title",TYPE:"type",CONTENT:"content",ICONURL:"iconUrl",ICONOBJECTFIT:"iconObjectFit",DATE:"date"},Er={[F.PAGE]:0,[F.TITLE]:"",[F.TYPE]:"text",[F.CONTENT]:"",[F.ICONURL]:"",[F.ICONOBJECTFIT]:"contain",[F.DATE]:new Date().toISOString()};class io{static async initDB(e,n,o){return mr(e,n,{upgrade(r,s,i,u){o&&o(r,s,i,u)}})}}class W{static async init(){return this.db?this.db:(this.db=await io.initDB(this.DB_NAME,this.VERSION,e=>{e.objectStoreNames.contains(this.STORE_NAME)||e.createObjectStore(this.STORE_NAME,{keyPath:"key"})}),await this.initializeDefaultSettings(),this.db)}static async initializeDefaultSettings(){const e=await this.getAll();for(const[n,o]of Object.entries(Se))e[n]===void 0&&await this.set(n,o)}static validateSettingKey(e){const n=Object.values(O);if(!n.includes(e))throw new Error(`Invalid setting key: ${e}. Valid keys are: ${n.join(", ")}`);return!0}static async get(e){this.validateSettingKey(e),await this.init();const n=await this.db.get(this.STORE_NAME,e);return n?n.value:Se[e]!==void 0?Se[e]:null}static async set(e,n){return this.validateSettingKey(e),await this.init(),this.db.put(this.STORE_NAME,{key:e,value:n})}static async delete(e){return this.validateSettingKey(e),await this.init(),this.db.delete(this.STORE_NAME,e)}static async getAll(){await this.init();const e={},n=Object.values(O);for(const r of n)e[r]=Se[r];const o=await this.db.getAll(this.STORE_NAME);for(const r of o)n.includes(r.key)&&(e[r.key]=r.value);return e}static async resetToDefaults(){await this.init();const e=Object.values(O);for(const n of e)await this.delete(n).catch(()=>{});for(const[n,o]of Object.entries(Se))await this.set(n,o)}static async clear(){await this.init();const e=Object.values(O);for(const n of e)await this.delete(n).catch(()=>{})}}X(W,"DB_NAME","Spellbook_Settings"),X(W,"STORE_NAME","settings"),X(W,"VERSION",2),X(W,"db",null);class A{static async init(e=null){return e||(e=await W.get(O.CURRENT_SPELLBOOK_DB)),this.activeDB&&this.activeDBName===e?this.activeDB:(this.activeDB&&(this.activeDB.close(),this.activeDB=null,this.activeDBName=null),this.activeDB=await io.initDB(e,this.VERSION,n=>{if(n.objectStoreNames.contains(this.SPELLS_STORE)||n.createObjectStore(this.SPELLS_STORE,{keyPath:a.PAGE}).createIndex("pageIndex",a.PAGE,{unique:!0}),!n.objectStoreNames.contains(this.NOTES_STORE)){const o=n.createObjectStore(this.NOTES_STORE,{keyPath:F.PAGE});o.createIndex("pageIndex",F.PAGE,{unique:!0}),o.createIndex("dateIndex",F.DATE,{unique:!1})}n.objectStoreNames.contains(this.SETTINGS_STORE)||n.createObjectStore(this.SETTINGS_STORE,{keyPath:"key"})}),this.activeDBName=e,this.activeDB)}static async switchSpellbook(e){await W.set(O.CURRENT_SPELLBOOK_DB,e),await this.init(e)}static async renameSpellbook(e,n){const o=await this.exportSpellbookData();await this.createNewSpellbook(n),await this.importSpellbookData(o),await this.deleteSpellbook(e);const s=(await this.listAllSpellbooks()).map(i=>i===e?n:i);await W.set(O.SPELLBOOK_LIST,s),await this.switchSpellbook(n)}static async generateUniqueSpellbookName(e){const n=await this.listAllSpellbooks();let o=e,r=1;for(;n.includes(o);)o=`${e} (${r})`,r++;return o}static async getCurrentSpellbookName(){return W.get(O.CURRENT_SPELLBOOK_DB)}static async listAllSpellbooks(){return await W.get("spellbookList")||[await this.getCurrentSpellbookName()]}static async createNewSpellbook(e){const n=await this.listAllSpellbooks();n.includes(e)||(n.push(e),await W.set("spellbookList",n)),await this.switchSpellbook(e)}static async deleteSpellbook(e){const n=await this.getCurrentSpellbookName();if(e===n)throw new Error("Cannot delete the currently active spellbook");const r=(await this.listAllSpellbooks()).filter(s=>s!==e);await W.set("spellbookList",r),await window.indexedDB.deleteDatabase(e)}static validateSpell(e){const n=Object.values(a),o=["_iconObjectUrl"],r=[a.ICONURL,a.ICONOBJECTURL,a.ICONOBJECTFIT];for(const s of n)if(!r.includes(s)&&e[s]===void 0)throw new Error(`Missing required spell property: ${s}`);for(const s in e)if(!n.includes(s)&&!o.includes(s))throw new Error(`Invalid spell property: ${s}`);return!0}static createEmptySpell(e){return{...at,[a.PAGE]:e}}static async getSpellByPage(e){const o=await(await this.init()).get(this.SPELLS_STORE,e);return o?(o[a.ICONURL]instanceof Blob&&(o._iconObjectUrl=URL.createObjectURL(o[a.ICONURL])),o):null}static async saveSpell(e){const n=await this.init(),o={...e};return"_iconObjectUrl"in o&&delete o._iconObjectUrl,this.validateSpell(o),await n.put(this.SPELLS_STORE,o),o[a.PAGE]}static async deleteSpellByPage(e){const n=await this.init();let o=await this.getAllSpells();await n.delete(this.SPELLS_STORE,e);const r=o.filter(s=>s[a.PAGE]>e);for(const s of r){const i={...s};i[a.PAGE]=s[a.PAGE]-1,await n.delete(this.SPELLS_STORE,s[a.PAGE]),await this.saveSpell(i)}}static async getAllSpells(){return(await(await this.init()).getAll(this.SPELLS_STORE)).map(o=>(o[a.ICONURL]instanceof Blob&&(o._iconObjectUrl=URL.createObjectURL(o[a.ICONURL])),o))}static async getAllSpellsSortedByPage(){return(await this.getAllSpells()).sort((n,o)=>n[a.PAGE]-o[a.PAGE])}static async getHighestSpellPageNumber(){const e=await this.getAllSpells();return e.length===0?0:Math.max(...e.map(n=>n[a.PAGE]))}static async swapSpellPages(e,n){try{const o=await this.getSpellByPage(e),r=await this.getSpellByPage(n);if(!o||!r)return!1;const s=o[a.PAGE];return o[a.PAGE]=r[a.PAGE],r[a.PAGE]=s,await this.saveSpell(o),await this.saveSpell(r),!0}catch(o){return console.error("Error swapping spell pages:",o),!1}}static validateNote(e){const n=Object.values(F);for(const o of n)if(e[o]===void 0)throw new Error(`Missing required note property: ${o}`);for(const o in e)if(!n.includes(o))throw new Error(`Invalid note property: ${o}`);return!0}static createEmptyNote(e){return{...Er,[F.PAGE]:e,[F.DATE]:new Date().toISOString()}}static async getNoteByPage(e){return await(await this.init()).get(this.NOTES_STORE,e)||null}static async saveNote(e){const n=await this.init();return e[F.DATE]=new Date().toISOString(),this.validateNote(e),await n.put(this.NOTES_STORE,e),e[F.PAGE]}static async deleteNoteByPage(e){return(await this.init()).delete(this.NOTES_STORE,e)}static async getAllNotes(){return(await this.init()).getAll(this.NOTES_STORE)}static async getAllNotesSortedByPage(){return(await this.getAllNotes()).sort((n,o)=>n[F.PAGE]-o[F.PAGE])}static async getAllNotesSortedByDate(){return(await this.getAllNotes()).sort((n,o)=>new Date(o[F.DATE])-new Date(n[F.DATE]))}static async getHighestNotePageNumber(){const e=await this.getAllNotes();return e.length===0?0:Math.max(...e.map(n=>n[F.PAGE]))}static async clearAllContent(){const e=await this.init();await e.clear(this.SPELLS_STORE),await e.clear(this.NOTES_STORE)}static async importSpellbookData(e){const n=await this.init();e.font&&await this.saveFont(e.font);const o=n.transaction([this.SPELLS_STORE,this.NOTES_STORE],"readwrite");if(e.spells&&Array.isArray(e.spells))for(const r of e.spells)try{const{_iconObjectUrl:s,...i}=r;if(i[a.ICONURL]&&i[a.ICONURL].data){const _=i[a.ICONURL].data.split(",")[1],l=atob(_),p=[];for(let c=0;c<l.length;c+=512){const h=l.slice(c,c+512),m=new Array(h.length);for(let T=0;T<h.length;T++)m[T]=h.charCodeAt(T);const L=new Uint8Array(m);p.push(L)}i[a.ICONURL]=new File(p,i[a.ICONURL].name||"image.png",{type:i[a.ICONURL].type||"image/png"})}this.validateSpell(i),await o.objectStore(this.SPELLS_STORE).put(i)}catch(s){console.error("Error importing spell:",s)}if(e.notes&&Array.isArray(e.notes))for(const r of e.notes)try{this.validateNote(r),await o.objectStore(this.NOTES_STORE).put(r)}catch(s){console.error("Error importing note:",s)}await o.done}static async exportSpellbookData(){const e=await this.getFont(),n=await this.getAllSpells(),o=await Promise.all(n.map(async r=>{const s={...r};return s[a.ICONURL]instanceof Blob&&(s[a.ICONURL]={data:await this.fileToBase64(s[a.ICONURL]),type:s[a.ICONURL].type,name:s[a.ICONURL].name}),delete s._iconObjectUrl,s}));return e&&e.data instanceof Blob&&(e.data=await this.fileToBase64(e.data)),{spells:o,notes:await this.getAllNotes(),name:this.activeDBName,exportDate:new Date().toISOString(),font:e}}static async saveFont(e){await(await this.init()).put(this.SETTINGS_STORE,{key:"font",data:e.data,name:e.name})}static async getFont(){const e=await this.init();return e.objectStoreNames.contains(this.SETTINGS_STORE)?await e.get(this.SETTINGS_STORE,"font"):null}static async removeFont(){await(await this.init()).delete(this.SETTINGS_STORE,"font")}static async fileToBase64(e){return new Promise((n,o)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>n(r.result),r.onerror=s=>o(s)})}static async saveSpellImage(e,n){try{let o=await this.getSpellByPage(e);return o||(o=this.createEmptySpell(e)),o[a.ICONURL]=n,"_iconObjectUrl"in o&&delete o._iconObjectUrl,await this.saveSpell(o),URL.createObjectURL(n)}catch(o){throw console.error("Error saving spell image:",o),o}}}X(A,"SPELLS_STORE","spells"),X(A,"NOTES_STORE","notes"),X(A,"VERSION",1),X(A,"activeDB",null),X(A,"activeDBName",null),X(A,"SETTINGS_STORE","spellbookSettings");const ao=Te(null);function vr({children:t}){const[e,n]=N({}),[o,r]=N(!0),[s,i]=N(null),u=async()=>{try{const l=await A.getFont();if(l&&l.data){const m=new FontFace("SpellbookFont",`url(${l.data})`);await m.load(),document.fonts.add(m),document.body.style.fontFamily="SpellbookFont, MagicSchool, sans-serif"}else document.body.style.fontFamily="MagicSchool, sans-serif";const h=3+((await W.getAll())[O.FONTADDITION]||0)/10;document.documentElement.style.setProperty("--reactive-font-size",`${h}vh`)}catch(l){console.error("Error loading font:",l)}};U(()=>{(async()=>{try{r(!0);const p=await W.getAll();n(p),await u(),console.log("Settings loaded in context:",p)}catch(p){console.error("Error loading settings:",p),i(p.message)}finally{r(!1)}})()},[]);const _=async(l,p)=>{try{return await W.set(l,p),n(c=>({...c,[l]:p})),!0}catch(c){return console.error("Error updating setting:",c),i(c.message),!1}};return f(ao.Provider,{value:{settings:e,loading:o,error:s,updateSetting:_,loadCustomFont:u},children:t})}const ct=()=>{const t=ve(ao);if(t===null)throw new Error("useSettings must be used within a SettingsProvider");return t};function br({reorderMode:t=!1}){const[e,n]=N([]),[o,r]=N(null),[s,i]=N(!1);U(()=>{u()},[]),U(()=>{t||r(null)},[t]);const u=async()=>{try{const p=await A.getAllSpellsSortedByPage();n(p)}catch(p){console.error("Error loading spells:",p)}},_=async p=>{t&&(o===null?r(p):o[a.PAGE]===p[a.PAGE]?r(null):(i(!0),await A.swapSpellPages(o[a.PAGE],p[a.PAGE])&&await u(),r(null),i(!1)))},l=({spell:p,index:c})=>{const h=o&&o[a.PAGE]===p[a.PAGE],m=f(x,{children:[f("img",{className:"small-icon",src:p&&(p._iconObjectUrl||p[a.ICONURL])?p._iconObjectUrl||p[a.ICONURL]:"assets/img/fireball.webp",alt:""}),f("div",{className:"spell-content",children:[f("div",{children:[p[a.PAGE]+1,")"]}),f("div",{children:[" ",p[a.NAME]]})]}),f("div",{children:p[a.LVL]})]});return t?f("div",{className:`spell-item ${h?"selected":""} ${s?"disabled":""}`,onClick:()=>!s&&_(p),children:m},c):f(ae,{to:`/spells?page=${p[a.PAGE]}`,className:"spell-item",children:m},c)};return f("div",{className:`spells-overview ${t?"reorder-mode":""}`,children:[t&&f("div",{className:"reorder-instructions",children:"Reorder"}),e.map((p,c)=>f(l,{spell:p,index:c},c)),f("div",{className:"spells-overview-after"})]})}function Sr(){const[t,e]=N(!0),[n,o]=N(window.innerWidth>window.innerHeight),[r,s]=N(!1),{settings:i,loading:u}=ct();U(()=>{const l=()=>{o(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),U(()=>{let l=!1,p=!1;const c=setTimeout(()=>{l=!0,p&&e(!1)},500);return u||(p=!0,l&&e(!1)),()=>clearTimeout(c)},[i,u]);const _=()=>{s(l=>!l)};return f(x,{children:t?f("div",{className:"svg-overlay",children:f("img",{className:"page-img",src:"assets/img/spellbook_cover.svg",alt:"Cover of DnD book"})}):f(x,{children:[f(Ee,{pageType:Z.TITLE,children:[f("div",{className:"text-overlay",id:"title",children:i[O.CURRENT_SPELLBOOK_DB]}),f(br,{reorderMode:r}),!n&&f(ae,{to:"/spells",className:"interact next-page"}),f("button",{class:"interact home__edit-button",onClick:_}),f(ae,{to:"/settings",class:"interact home__settings-button"})]}),n&&f(Ee,{pageType:Z.SPELLRIGHT,children:n&&f(ae,{to:"/spells",className:"interact next-page"})})]})})}function Nr(){var be;const[t,e]=N(window.innerWidth>window.innerHeight),{settings:n,updateSetting:o}=ct(),[r,s]=N(""),[i,u]=N(n[O.CURRENT_SPELLBOOK_DB]),[_,l]=N(n[O.FONTADDITION]||0),[p,c]=N(n[O.SPELLBOOK_LIST]||[]),[h,m]=N(!1),L=async()=>{const v=await A.listAllSpellbooks();await o(O.SPELLBOOK_LIST,v);const R=await A.getCurrentSpellbookName();await o(O.CURRENT_SPELLBOOK_DB,R),m(!1)};U(()=>{L(),M()},[h]),U(()=>{u(n[O.CURRENT_SPELLBOOK_DB]),l(n[O.FONTADDITION]||0),c(n[O.SPELLBOOK_LIST]||[])},[n]),U(()=>{const v=()=>{e(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const T=async()=>{try{const v=await A.exportSpellbookData(),R=new Blob([JSON.stringify(v)],{type:"application/json"}),Y=URL.createObjectURL(R),G=document.createElement("a");G.href=Y,G.download=`${n[O.CURRENT_SPELLBOOK_DB]}.json.spellbook`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(Y)}catch(v){console.error("Export failed:",v)}},[S,C]=N(null),[I,$]=N(null),j=async v=>{try{const R=v.target.files[0];if(!R)return;$(R);const Y=new FileReader;Y.onload=async G=>{const J=JSON.parse(G.target.result);C(J)},Y.readAsText(R)}catch(R){console.error("Import failed:",R),C(null),$(null)}},ee=async()=>{try{if(!S)return;const v=await A.generateUniqueSpellbookName(S.name||"Imported Spellbook");await A.createNewSpellbook(v),await A.importSpellbookData(S),C(null),$(null),m(!0)}catch(v){console.error("Import failed:",v)}},ie=async()=>{try{const v=n[O.CURRENT_SPELLBOOK_DB];v!==i&&(await A.renameSpellbook(v,i),m(!0))}catch(v){console.error("Failed to change spellbook name:",v)}},[ke,H]=N(null);U(()=>{(async()=>{const R=await A.getFont();H(R)})()},[]);const{loadCustomFont:M}=ct(),q=async v=>{const R=v.target.files[0];if(R)try{const Y=new FileReader;Y.onload=async G=>{const J={data:G.target.result,name:R.name};await A.saveFont(J),H(J),await M()},Y.readAsDataURL(R)}catch(Y){console.error("Failed to upload font:",Y)}},B=async()=>{try{await A.removeFont(),H(null),await M()}catch(v){console.error("Failed to remove font:",v)}},z=async()=>{if(r)try{await A.createNewSpellbook(r),await o(O.CURRENT_SPELLBOOK_DB,r),s(""),m(!0)}catch(v){console.error("Failed to create new spellbook:",v)}},Ae=async v=>{const R=parseInt(v)||0;l(R),await o(O.FONTADDITION,R),await M()},Me=async v=>{await o(O.ANIMATION,v)},Ge=async v=>{await o(O.PAGEFIT,v)},Ve=async v=>{if(window.confirm(`Are you sure you want to delete the spellbook "${v}"?`))try{await A.deleteSpellbook(v),m(!0)}catch(R){console.error("Failed to delete spellbook:",R)}};return f(x,{children:[f(Ee,{pageType:Z.TITLE,children:[f("div",{className:"text-overlay",id:"title",children:"Settings"}),f("div",{className:"settings__container",children:[f("div",{children:["Spellbook Settings",f("hr",{className:"settings__hr-break"})]}),f("div",{className:"settings__container-line",children:[f("label",{className:"settings__file-input-label",for:"spellbookName",children:["Name:",f("br",{}),f("input",{type:"text",value:i,id:"spellbookName",onChange:v=>u(v.target.value),className:"settings__input"})]}),f("button",{className:"settings__interact",onClick:ie,children:"Change"})]}),f("div",{className:"settings__container-line",children:[f("label",{className:"settings__file-input-label",children:["Spellbook Font",f("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:q,className:"settings__file-input"})]}),f("button",{className:"settings__interact",onClick:B,children:"X"})]}),f("div",{children:["Change Spellbook",f("div",{children:[f("div",{children:["Current: ",f("i",{children:n[O.CURRENT_SPELLBOOK_DB]})]}),(be=n[O.SPELLBOOK_LIST])==null?void 0:be.filter(v=>v!==n[O.CURRENT_SPELLBOOK_DB]).map(v=>f("div",{className:"settings__spellbook-item",children:[f("button",{onClick:async()=>{await A.switchSpellbook(v),m(!0)},className:"settings__spellbook-button",children:v}),f("button",{className:"settings__interact",onClick:()=>Ve(v),children:"Delete"})]},v))]})]}),f("div",{className:"settings__container-line",children:[f("label",{for:"newSpellbookName",children:["Create new spellbook",f("input",{type:"text",id:"newSpellbookName",value:r,className:"settings__input",onChange:v=>s(v.target.value)})]}),f("button",{className:"settings__interact",onClick:z,children:"Add"})]}),f("div",{children:[f("label",{for:"exportSpellbook",children:"Export Spellbook"}),f("br",{}),f("button",{id:"exportSpellbook",className:"settings__interact",onClick:T,children:"Export"})]}),f("div",{children:[f("label",{for:"importSpellbook",children:"Import Spellbook"}),f("input",{type:"file",accept:".spellbook,.json",id:"importSpellbook",onChange:j,className:"settings__file-input"}),S&&f("div",{children:[f("p",{children:['Import "',S.name||"Unnamed Spellbook",'"?']}),f("button",{onClick:ee,children:"Confirm Import"}),f("button",{onClick:()=>{C(null),$(null)},children:"Cancel"})]})]}),f("div",{children:["General Settings",f("hr",{className:"settings__hr-break"})]}),f("label",{children:["Fontsize:",f("input",{type:"number",value:_,onChange:v=>Ae(v.target.value),className:"settings__input"})]}),f("label",{children:["Animations:",f("input",{type:"checkbox",checked:n[O.ANIMATION],onChange:v=>Me(v.target.checked)})]}),f("label",{children:["Page Fit:",f("input",{type:"checkbox",checked:n[O.PAGEFIT],onChange:v=>Ge(v.target.checked)})]}),f("div",{className:"settings__container-after"})]}),f(ae,{to:"/",className:"interact settings__home-button"}),f("button",{className:"interact settings__font-button"}),f("button",{className:"interact settings__edit-button"})]}),t&&f(Ee,{pageType:Z.SPELLRIGHT})]})}const wr=(t,e)=>{const[n,o]=N(null);return xe((...s)=>{n&&clearTimeout(n),o(setTimeout(()=>{t(...s),o(null)},e))},[t,e,n])},Or=({type:t,id:e,isDoublePage:n,onAnimationEnd:o})=>{const r=se(null);U(()=>{const i=r.current;if(i){i.play().catch(_=>console.error("Failed to play animation:",_));const u=()=>{o&&o(e)};return i.addEventListener("ended",u),()=>i.removeEventListener("ended",u)}},[e,o]);const s=t==="next"?n?"assets/ani/next-page-double.webm":"assets/ani/next-page.webm":n?"assets/ani/previous-page-double.webm":"assets/ani/previous-page.webm";return f("video",{ref:r,className:`page-transition-animation ${t}-animation`,muted:!0,playsInline:!0,children:f("source",{src:s,type:"video/webm"})})};function Lr(){const[t,e]=N(window.innerWidth>window.innerHeight),[n,o]=N([]),[r,s]=N(null),[i,u]=N(null),[_,l]=N(0),[p,c]=N(!0),[h,m]=N(!1),L=se(null),T=se(null),[S,C]=N(!1),[I,$]=N(!1),[j,ee]=N(null),[ie,ke]=N(null),[H,M]=N({[a.NAME]:"",[a.INCANT]:"",[a.SPEED]:"",[a.RANGE]:"",[a.TYPE]:"",[a.DESC]:"",[a.LVL]:0,[a.ICONURL]:""}),[q,B]=N({[a.NAME]:"",[a.INCANT]:"",[a.SPEED]:"",[a.RANGE]:"",[a.TYPE]:"",[a.DESC]:"",[a.LVL]:0,[a.ICONURL]:""}),[z,Ae]=N([]),[Me,Ge]=N(0);U(()=>{const E=()=>{const K=new URLSearchParams(window.location.search).get("page");return K?parseInt(K,10):0},d=E();l(d);const y=()=>{const k=E();l(k)};return window.addEventListener("popstate",y),()=>window.removeEventListener("popstate",y)},[]),U(()=>{(async()=>{try{const d=await A.getAllSpells();o(d),c(!1),console.log("All spells loaded:",d.length)}catch(d){console.error("Error loading spells:",d),c(!1)}})()},[]),U(()=>{if(n.length===0)return;const E=async(d=!1)=>{const y=n.find(g=>g[a.PAGE]===_+(d?1:0)),k=d?B:M;(d?u:s)(y||null),k({[a.NAME]:(y==null?void 0:y[a.NAME])||"",[a.INCANT]:(y==null?void 0:y[a.INCANT])||"",[a.SPEED]:(y==null?void 0:y[a.SPEED])||"",[a.RANGE]:(y==null?void 0:y[a.RANGE])||"",[a.TYPE]:(y==null?void 0:y[a.TYPE])||"",[a.DESC]:(y==null?void 0:y[a.DESC])||"",[a.LVL]:(y==null?void 0:y[a.LVL])||0,[a.ICONURL]:(y==null?void 0:y._iconObjectUrl)||(y==null?void 0:y[a.ICONURL])||""})};j&&z.length>0?j==="next"?E(!0):j==="previous"&&E(!1):(E(!1),E(!0))},[n,_,j,z.length]);const Ve=async(E,d=!1)=>{try{const y=d?_+1:_,k=d?i:r,K={...E};"_iconObjectUrl"in K&&delete K._iconObjectUrl;let g;if(k){const{_iconObjectUrl:w,...te}=k;g={...te,...K}}else g={...at,[a.PAGE]:y,...K};await A.saveSpell(g),k&&k._iconObjectUrl&&(g._iconObjectUrl=k._iconObjectUrl),o(w=>w.some(le=>le[a.PAGE]===y)?w.map(le=>le[a.PAGE]===y?(le._iconObjectUrl&&!g._iconObjectUrl&&(g._iconObjectUrl=le._iconObjectUrl),g):le):[...w,g]),d?u(g):s(g)}catch(y){console.error("Error saving spell:",y)}},be=wr((E,d=!1)=>{Ve(E,d)},800),v=(E,d)=>{E===a.LVL&&(d=parseInt(d,10)||0),M(y=>({...y,[E]:d})),be({...H,[E]:d})},R=(E,d)=>{E===a.LVL&&(d=parseInt(d,10)||0),B(y=>({...y,[E]:d})),be({...q,[E]:d,[a.PAGE]:_+1},!0)},Y=()=>{m(!h)};U(()=>{const E=()=>{e(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const G=(E,d,y)=>h?f("input",{type:E===a.LVL?"number":"text",className:`${d} editable`,value:H[E],onInput:k=>v(E,k.target.value),placeholder:y}):f("div",{className:d,children:r?r[E]:""}),J=(E,d,y)=>h?f("input",{type:E===a.LVL?"number":"text",className:`${d} editable`,value:q[E],onInput:k=>R(E,k.target.value),placeholder:y}):f("div",{className:d,children:i?i[E]:""}),Tt=async(E,d=!1)=>{const y=E.target.files[0];if(y)try{d?$(!0):C(!0);const k=d?_+1:_,K=await A.saveSpellImage(k,y),g={...d?i||{}:r||{},[a.PAGE]:k,[a.ICONURL]:y,_iconObjectUrl:K},w={...d?q:H,[a.ICONURL]:K};d?(B(w),u(g)):(M(w),s(g)),o(te=>{if(te.some(pe=>pe[a.PAGE]===k))return te.map(pe=>pe[a.PAGE]===k?g:pe);{const pe={...at,[a.PAGE]:k,[a.ICONURL]:y,_iconObjectUrl:K};return[...te,pe]}})}catch(k){console.error("Error uploading image:",k)}finally{d?$(!1):C(!1)}};U(()=>()=>{n.forEach(E=>{E._iconObjectUrl&&URL.revokeObjectURL(E._iconObjectUrl)})},[n]);const Pe=(E=!1)=>{var d,y;E?(d=T.current)==null||d.click():(y=L.current)==null||y.click()},He=E=>{const d=Math.max(0,E),y=new URL(window.location);y.searchParams.set("page",d),window.history.pushState({},"",y),l(d)},It=E=>{const d=Me;Ge(y=>y+1),Ae(y=>[...y,{id:d,type:E}])},co=E=>{if(Ae(d=>d.filter(y=>y.id!==E)),z.length===1){if(j==="next"){const d=n.find(y=>y[a.PAGE]===_);s(d||null),M({[a.NAME]:(d==null?void 0:d[a.NAME])||"",[a.INCANT]:(d==null?void 0:d[a.INCANT])||"",[a.SPEED]:(d==null?void 0:d[a.SPEED])||"",[a.RANGE]:(d==null?void 0:d[a.RANGE])||"",[a.TYPE]:(d==null?void 0:d[a.TYPE])||"",[a.DESC]:(d==null?void 0:d[a.DESC])||"",[a.LVL]:(d==null?void 0:d[a.LVL])||0,[a.ICONURL]:(d==null?void 0:d._iconObjectUrl)||(d==null?void 0:d[a.ICONURL])||""})}else if(j==="previous"){const d=n.find(y=>y[a.PAGE]===_+1);u(d||null),B({[a.NAME]:(d==null?void 0:d[a.NAME])||"",[a.INCANT]:(d==null?void 0:d[a.INCANT])||"",[a.SPEED]:(d==null?void 0:d[a.SPEED])||"",[a.RANGE]:(d==null?void 0:d[a.RANGE])||"",[a.TYPE]:(d==null?void 0:d[a.TYPE])||"",[a.DESC]:(d==null?void 0:d[a.DESC])||"",[a.LVL]:(d==null?void 0:d[a.LVL])||0,[a.ICONURL]:(d==null?void 0:d._iconObjectUrl)||(d==null?void 0:d[a.ICONURL])||""})}ee(null)}},kt=()=>{ee("next"),It("next"),He(_+(t?2:1))},lo=()=>{_!==0&&(ee("previous"),It("previous"),He(Math.max(_-(t?2:1),0)))},At=async(E=!1)=>{var d;try{const y=E?_+1:_;if(!confirm(`Are you sure you want to delete the spell: ${(d=E?i:r)==null?void 0:d[a.NAME]}?`))return;await A.deleteSpellByPage(y);const k=await A.getAllSpells();o(k);const K=k.length>0?Math.max(...k.map(g=>g[a.PAGE])):-1;if(E){const g=k.find(w=>w[a.PAGE]===_+1);u(g||null),B({[a.NAME]:(g==null?void 0:g[a.NAME])||"",[a.INCANT]:(g==null?void 0:g[a.INCANT])||"",[a.SPEED]:(g==null?void 0:g[a.SPEED])||"",[a.RANGE]:(g==null?void 0:g[a.RANGE])||"",[a.TYPE]:(g==null?void 0:g[a.TYPE])||"",[a.DESC]:(g==null?void 0:g[a.DESC])||"",[a.LVL]:(g==null?void 0:g[a.LVL])||0,[a.ICONURL]:(g==null?void 0:g._iconObjectUrl)||(g==null?void 0:g[a.ICONURL])||""})}else if(_>K&&_>0)He(t?Math.max(_-2,0):_-1);else{const g=k.find(te=>te[a.PAGE]===_),w=k.find(te=>te[a.PAGE]===_+1);s(g||null),u(w||null),M({[a.NAME]:(g==null?void 0:g[a.NAME])||"",[a.INCANT]:(g==null?void 0:g[a.INCANT])||"",[a.SPEED]:(g==null?void 0:g[a.SPEED])||"",[a.RANGE]:(g==null?void 0:g[a.RANGE])||"",[a.TYPE]:(g==null?void 0:g[a.TYPE])||"",[a.DESC]:(g==null?void 0:g[a.DESC])||"",[a.LVL]:(g==null?void 0:g[a.LVL])||0,[a.ICONURL]:(g==null?void 0:g._iconObjectUrl)||(g==null?void 0:g[a.ICONURL])||""}),B({[a.NAME]:(w==null?void 0:w[a.NAME])||"",[a.INCANT]:(w==null?void 0:w[a.INCANT])||"",[a.SPEED]:(w==null?void 0:w[a.SPEED])||"",[a.RANGE]:(w==null?void 0:w[a.RANGE])||"",[a.TYPE]:(w==null?void 0:w[a.TYPE])||"",[a.DESC]:(w==null?void 0:w[a.DESC])||"",[a.LVL]:(w==null?void 0:w[a.LVL])||0,[a.ICONURL]:(w==null?void 0:w._iconObjectUrl)||(w==null?void 0:w[a.ICONURL])||""})}alert("Spell deleted successfully!")}catch(y){console.error("Error deleting spell:",y),alert("Error deleting spell. Please try again.")}};return f(x,{children:[f(Ee,{pageType:Z.SPELL,children:[G(a.NAME,"text-overlay spellname",""),G(a.INCANT,"text-overlay incant",""),G(a.SPEED,"text-overlay speed",""),G(a.RANGE,"text-overlay range",""),G(a.TYPE,"text-overlay type",""),h?f("textarea",{value:H[a.DESC],onInput:E=>v(a.DESC,E.target.value),className:"description textarea",placeholder:"Description"}):f("div",{className:"description",children:r?r[a.DESC]:""}),G(a.LVL,"level","0"),f("div",{className:"pageNumber",children:_+1}),f(ae,{to:"/settings",className:"interact settings-button"}),f(ae,{to:"/",className:"interact home-button"}),f("button",{className:"interact font-button"}),f("button",{className:"interact edit-button",onClick:Y}),h&&f("button",{className:"interact delete-button",onClick:()=>At(!1),children:"X"}),!h&&f("button",{className:"interact previous-page",onClick:lo}),!h&&!t&&f("button",{className:"interact next-page",onClick:kt}),h?f(x,{children:[f("input",{type:"file",ref:L,style:{display:"none"},accept:"image/*",onChange:E=>Tt(E)}),f("img",{className:"icon interact",src:H[a.ICONURL]||"assets/img/fireball.webp",style:{objectFit:(r==null?void 0:r[a.ICONOBJECTFIT])||"contain"},alt:"",onClick:()=>Pe(),onKeyDown:E=>{E.key==="Enter"&&Pe()},tabIndex:0}),S&&f("div",{className:"loading-indicator",children:"Uploading..."})]}):f("img",{className:"icon",src:r&&(r._iconObjectUrl||r[a.ICONURL])?r._iconObjectUrl||r[a.ICONURL]:"assets/img/fireball.webp",style:r?{objectFit:r[a.ICONOBJECTFIT]}:{},alt:""})]}),t&&f(Ee,{pageType:Z.SPELLRIGHT,children:[J(a.NAME,"text-overlay spellname right-page-offset",""),J(a.INCANT,"text-overlay incant right-page-offset",""),J(a.SPEED,"text-overlay speed right-page-offset",""),J(a.RANGE,"text-overlay range right-page-offset",""),J(a.TYPE,"text-overlay type right-page-offset",""),h?f("textarea",{value:q[a.DESC],onInput:E=>R(a.DESC,E.target.value),className:"description textarea right-page-offset",placeholder:"Description"}):f("div",{className:"description right-page-offset",children:i?i[a.DESC]:""}),J(a.LVL,"level right-page-offset","0"),f("div",{className:"pageNumber right-page-offset",children:_+2}),f("button",{className:"interact settings-button right-page-offset"}),f(ae,{to:"/",className:"interact home-button right-page-offset"}),f("button",{className:"interact font-button right-page-offset"}),h&&f("button",{className:"interact delete-button right-page-offset",onClick:()=>At(!0),children:"X"}),f("button",{className:"interact edit-button right-page-offset",onClick:Y}),t&&!h&&f("button",{className:"interact next-page",onClick:kt}),h?f(x,{children:[f("input",{type:"file",ref:T,style:{display:"none"},accept:"image/*",onChange:E=>Tt(E,!0)}),f("img",{className:"icon right-page-offset interact",src:q[a.ICONURL]||"assets/img/fireball.webp",style:{objectFit:(i==null?void 0:i[a.ICONOBJECTFIT])||"contain"},alt:"",onClick:()=>Pe(!0),onKeyDown:E=>{E.key==="Enter"&&Pe(!0)},tabIndex:0}),I&&f("div",{className:"loading-indicator right-page-offset",children:"Uploading..."})]}):f("img",{className:"icon right-page-offset",src:i&&(i._iconObjectUrl||i[a.ICONURL])?i._iconObjectUrl||i[a.ICONURL]:"assets/img/fireball.webp",style:i?{objectFit:i[a.ICONOBJECTFIT]}:{},alt:""})]}),z.map(E=>f(Or,{id:E.id,type:E.type,isDoublePage:t,onAnimationEnd:co},E.id))]})}function Cr(){return U(()=>{(async()=>{try{const e=await A.getCurrentSpellbookName();console.log("Current spellbook:",e);const n=await A.getFont();if(n&&n.data){const o=new FontFace("SpellbookFont",`url(${n.data})`);await o.load(),document.fonts.add(o),document.body.style.fontFamily="SpellbookFont, MagicSchool, sans-serif"}}catch(e){console.error("Error loading data:",e)}})()},[]),f(vr,{children:f("div",{className:"container",children:f(no,{base:"/spellbook",children:f(ar,{children:[f(qe,{path:"/settings",component:Nr}),f(qe,{path:"/spells",component:Lr}),f(qe,{path:"/",component:Sr})]})})})})}const Tr="modulepreload",Ir=function(t){return"/spellbook/"+t},ln={},kr=function(e,n,o){let r=Promise.resolve();if(n&&n.length>0){let i=function(l){return Promise.all(l.map(p=>Promise.resolve(p).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),_=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=i(n.map(l=>{if(l=Ir(l),l in ln)return;ln[l]=!0;const p=l.endsWith(".css"),c=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":Tr,p||(h.as="script"),h.crossOrigin="",h.href=l,_&&h.setAttribute("nonce",_),document.head.appendChild(h),p)return new Promise((m,L)=>{h.addEventListener("load",m),h.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return r.then(i=>{for(const u of i||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};function Ar(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:o,onRegistered:r,onRegisteredSW:s,onRegisterError:i}=t;let u,_;const l=async(c=!0)=>{await _};async function p(){if("serviceWorker"in navigator){if(u=await kr(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/spellbook/sw.js",{scope:"/spellbook/",type:"classic"})).catch(c=>{i==null||i(c)}),!u)return;u.addEventListener("activated",c=>{(c.isUpdate||c.isExternal)&&window.location.reload()}),u.addEventListener("installed",c=>{c.isUpdate||o==null||o()}),u.register({immediate:e}).then(c=>{s?s("/spellbook/sw.js",c):r==null||r(c)}).catch(c=>{i==null||i(c)})}}return _=p(),l}Ar();ge(f(Cr,{}),document.getElementById("app"));
